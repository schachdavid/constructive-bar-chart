(this["webpackJsonpparticipatory-bar-chart"]=this["webpackJsonpparticipatory-bar-chart"]||[]).push([[0],{26:function(e,t,n){e.exports={container:"Switcher_container__2qgde",buttonContainer:"Switcher_buttonContainer__tuUOc",selected:"Switcher_selected__1qMfi"}},35:function(e,t,n){e.exports={container:"app_container__2JKVN",switcherContainer:"app_switcherContainer__3HaV7",main:"app_main__2Gv1F"}},36:function(e,t,n){e.exports={container:"Swoopy_container__3rcrv",label:"Swoopy_label__2i9fh"}},37:function(e,t,n){e.exports={container:"Block_container__ZIUlk",block:"Block_block__3GIao",label:"Block_label__36EjM"}},38:function(e,t,n){e.exports={bar:"InteractiveBars_bar__1EexN",ghostBar:"InteractiveBars_ghostBar__29KCi"}},40:function(e,t,n){e.exports={container:"ChartPresenter_container__3q4HM",title:"ChartPresenter_title__2kJKD"}},43:function(e,t,n){e.exports={bar:"Bars_bar__1xEPI"}},44:function(e,t,n){e.exports={line:"BoxPlot_line__1FYpY"}},45:function(e,t,n){e.exports={container:"InteractiveBarChart_container__2QaEl",toolsContainer:"InteractiveBarChart_toolsContainer__2qo98"}},51:function(e,t,n){e.exports={line:"Line_line__38vbU"}},52:function(e,t,n){e.exports={tick:"XAxis_tick__cA7Dh"}},54:function(e,t,n){e.exports={tick:"YAxis_tick__1TPev"}},64:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(49),r=n.n(i),s=(n(64),n(5)),o=n(9),l=n(76),b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ")},d=function(e,t,n){var a=Object(l.a)(n,t);return[Math.max.apply(Math,Object(o.a)(e||[]).concat(Object(o.a)(a))),Math.min.apply(Math,Object(o.a)(e||[]).concat(Object(o.a)(a)))]},h=n(40),j=n.n(h),u=n(0),O=function(e){var t=e.children,n=e.title,a=e.className;return Object(u.jsxs)("div",{className:b(j.a.container,a),children:[n&&Object(u.jsx)("h2",{className:j.a.title,children:n}),t]})},f=n(26),x=n.n(f),m=function(e){var t=e.options,n=Object(a.useState)(0),c=Object(s.a)(n,2),i=c[0],r=c[1];return Object(u.jsx)("div",{className:x.a.container,children:t.map((function(e,t){return Object(u.jsx)("div",{className:i===t?b(x.a.selected,x.a.buttonContainer):b(x.a.buttonContainer),children:Object(u.jsx)("button",{onClick:function(){r(t),e.onClick&&e.onClick()},children:e.label})},t)}))})},g=n(8),p=n(83),y=n(82),_=function(e){e.data;var t=e.getX,n=e.getY,i=e.scaleY,r=e.children,o=e.height,l=void 0===o?200:o,b=e.width,d=void 0===b?600:b,h=e.margin,j=void 0===h?[30,30,45,70]:h,O=Object(a.useState)([0,0]),f=Object(s.a)(O,2),x=f[0],m=f[1],_=Object(a.useState)(),v=Object(s.a)(_,2),k=v[0],w=v[1],N=Object(a.useMemo)((function(){return Object(p.a)().domain(k||[0,0]).range([0,d])}),[d,k]),S=Object(a.useMemo)((function(){return i||Object(y.a)().domain(x||[0,0]).range([0,l]).nice()}),[i,l,x]);return Object(u.jsx)("svg",{height:j[0]+l+j[2],width:j[3]+d+j[1],children:Object(u.jsxs)("g",{transform:"translate(".concat(j[3],", ").concat(j[0],")"),children:[c.a.Children.map(r,(function(e){return c.a.cloneElement(e,Object(g.a)({height:l,width:d,getX:t,getY:n,scaleX:N,scaleY:S,xExtent:k,setXExtent:w,yExtent:x,setYExtent:m},e.props))})),")"]})})},v=(n(86),n(51),n(13)),k=n(43),w=n.n(k),N=n(81),S=["barWidth"],M=function(e){var t=e.barWidth,n=Object(v.a)(e,S),c=n.className,i=n.data,r=n.height,s=n.width,o=n.getX,l=n.getY,h=n.scaleY,j=n.setYExtent,O=n.showTicks;Object(a.useEffect)((function(){j((function(e){return d(e,l,i)}))}),[i,l,j]);var f=Object(a.useMemo)((function(){return Object(N.a)().domain(i.map(o)).range([0,s]).paddingInner(.2)}),[i,o,s]),x=Object(a.useMemo)((function(){if(O){var e=h.ticks(5);return Object(u.jsxs)("mask",{id:"tickLines",children:[Object(u.jsx)("rect",{x:"0",y:"0",width:2*s,height:2*r,fill:"white"}),e.map((function(e,t){return Object(u.jsx)("g",{transform:"translate(0,".concat(h(e),")"),children:Object(u.jsx)("line",{stroke:"black",x1:0,x2:2*s,y1:0,y2:0,className:w.a.tick},t)},e)}))]})}}),[r,h,O,s]);return Object(u.jsxs)("g",{children:[x,Object(u.jsx)("g",{mask:O&&"url(#tickLines)",children:i.map((function(e){var n=h.range()[1]-h(l(e));return Object(u.jsxs)("g",{transform:"translate(".concat(f(o(e))+10,",").concat(h(h.domain()[1])-n,")"),children:[Object(u.jsx)("rect",{className:b(w.a.bar,c),height:n,width:t||f.bandwidth(),x:t?f.bandwidth()/2-t/2:null}),Object(u.jsx)("text",{textAnchor:"middle",alignmentBaseline:"central",x:f.bandwidth()/2,y:n+20,children:o(e)})]},o(e))}))})]})},C=(n(52),n(50),n(53),n(54)),I=n.n(C),B=["className","showTicks"],Y=function(e){e.className;var t=e.showTicks,n=void 0===t||t,c=Object(v.a)(e,B),i=c.scaleX,r=c.scaleY,s=Object(a.useMemo)((function(){return r.ticks(5)}),[r]);return Object(u.jsx)("g",{transform:"translate(".concat(i.range()[0]-10,", 0)"),children:s.map((function(e){return Object(u.jsxs)("g",{transform:"translate(0,".concat(r(e),")"),children:[Object(u.jsx)("text",{x:-6,textAnchor:"end",alignmentBaseline:"central",children:e}),n&&Object(u.jsx)("line",{x1:0,x2:5,y1:0,y2:0,className:I.a.tick})]},e)}))})},E=(n(44),{title:"Global annual CO\u2082 emissions",yAxisLabel:"billion tons CO\u2082",xKey:"label",yKey:"emission",data:[{label:"1950",emission:60},{label:"1965",emission:110.32},{label:"1980",emission:190.49},{label:"1995",emission:230.45},{label:"2010",emission:330.34}]}),X=n(35),D=n.n(X),T=n(16),K=n(80),W=n(55),z=n.n(W),A=n(45),L=n.n(A),P=n(36),F=n.n(P),G=585,q=180,H=505,J=230,U=function(e){var t=e.className,n=Object(a.useMemo)((function(){var e=.5*(H+G),t=.5*(J+q),n=Math.atan2(J-q,H-G)-Math.PI/2-.2,a=e+30*Math.cos(n),c=t+30*Math.sin(n);return"M".concat(G," ").concat(q," Q").concat(a," ").concat(c," ").concat(H," ").concat(J)}),[]);return Object(u.jsxs)("svg",{className:b(t,F.a.container),children:[Object(u.jsx)("defs",{children:Object(u.jsx)("marker",{id:"head",orient:"auto",markerWidth:"3",markerHeight:"4",refX:"0.1",refY:"2",children:Object(u.jsx)("path",{d:"M0,0 V4 L2,2 Z",fill:"black"})})}),Object(u.jsx)("path",{id:"arrow-line","stroke-width":"6",fill:"none",stroke:"white",d:n}),Object(u.jsx)("text",{x:G-12,y:q+Math.abs(q-J)/2*1.5,className:F.a.label,children:"Drag and Drop"}),Object(u.jsx)("text",{x:G-12,y:q+Math.abs(q-J)/2*2,className:F.a.label,children:"Blocks"}),Object(u.jsx)("path",{"marker-end":"url(#head)",id:"arrow-line","stroke-width":"4",fill:"none",stroke:"white",d:n}),Object(u.jsx)("path",{id:"arrow-line","marker-end":"url(#head)","stroke-width":"2",fill:"none",stroke:"black",d:n})]})};var V=n(84),Q="block",R=n(37),Z=n.n(R),$=function(e){var t=e.scaledSize,n=e.height,a=e.size,c=e.label,i=Object(V.a)((function(){return{type:Q,item:{height:n,width:t},end:function(e,t){var n=t.getDropResult();console.log("dropped",n)},collect:function(e){return{isDragging:e.isDragging(),handlerId:e.getHandlerId()}}}})),r=Object(s.a)(i,2),o=r[0].isDragging,l=r[1];return Object(u.jsxs)("div",{className:Z.a.container,style:{height:n},children:[Object(u.jsx)("div",{ref:l,className:Z.a.block,style:{width:t,cursor:o?"grabbing":"grab"}}),c&&Object(u.jsx)("span",{className:Z.a.label,children:"".concat(a," ").concat(c)})]})},ee=n(79),te={position:"fixed",pointerEvents:"none",zIndex:1e3,left:0,top:0,width:"100%",height:"100%"};function ne(e,t){if(!e||!t)return{display:"none"};var n=t.x,a=t.y,c="translate(".concat(n,"px, ").concat(a,"px)");return{transform:c,WebkitTransform:c}}var ae=function(e){var t=Object(ee.a)((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}})),n=t.itemType,a=t.isDragging,c=t.item,i=t.initialOffset,r=t.currentOffset;return a?(document.body.style.cursor="grabbing",Object(u.jsx)("div",{style:te,children:Object(u.jsx)("div",{style:ne(i,r,e.snapToGrid),children:n===Q?Object(u.jsx)("div",{style:{height:c.height,width:c.width,backgroundColor:"black",boxShadow:"5px 5px 15px 5px rgba(0,0,0,0.25)"}}):null})})):(document.body.style.cursor="auto",null)},ce=n(38),ie=n.n(ce),re=n(85),se=["barWidth","items","setItems"],oe=.5,le=function(e){var t=e.className,n=e.barWidth,a=e.scaleX,c=e.height,i=e.yShift,r=e.removeItem,o=Object(V.a)((function(){return{type:Q,item:function(){return r(),{height:c,width:n}},end:function(e,t){var n=t.getDropResult();console.log("dropped",n)}}}),[r]),l=Object(s.a)(o,2)[1];return Object(u.jsx)("rect",{ref:l,className:b(ie.a.bar,t),style:{cursor:"grab"},height:c-1,width:n||a.bandwidth(),x:n?a.bandwidth()/2-n/2:null,y:-i-oe})},be=function(e){var t=e.x,n=e.scaleX,a=e.scaleY,c=e.barWidth,i=e.className,r=e.items,l=e.addItem,d=e.removeItem,h=Object(re.a)((function(){return{accept:Q,drop:function(e){return l(e.height,t)},collect:function(e){return{isOver:e.isOver(),item:e.getItem()}}}}),[l]),j=Object(s.a)(h,2),O=j[0],f=O.item,x=O.isOver,m=j[1],g=r.reduce((function(e,a,r){var s=e.yShift+a;return{yShift:s,renderedBlocks:[].concat(Object(o.a)(e.renderedBlocks),[Object(u.jsx)(le,{className:i,barWidth:c,height:a,scaleX:n,yShift:s,removeItem:function(){console.log("ren"),d(r,t)}},r)])}}),{yShift:0,renderedBlocks:[]});return Object(u.jsxs)("g",{transform:"translate(".concat(n(t)+10,",0)"),children:[Object(u.jsx)("rect",{ref:m,height:a.range()[1],width:n.paddingInner(0).bandwidth(),fill:"rgba(0,0,0,0)"}),Object(u.jsxs)("g",{transform:"translate(0,".concat(a(a.domain()[1]),")"),children:[g.renderedBlocks,x&&f&&Object(u.jsx)("rect",{className:b(ie.a.bar,ie.a.ghostBar,i),height:f.height-1,width:c||n.bandwidth(),x:c?n.bandwidth()/2-c/2:null,y:-g.yShift-oe-f.height}),Object(u.jsx)("text",{textAnchor:"middle",alignmentBaseline:"central",x:n.bandwidth()/2,y:20,children:t})]},t)]})},de=function(e){var t=e.barWidth,n=e.items,c=e.setItems,i=Object(v.a)(e,se),r=i.className,s=i.data,l=i.width,b=i.getX,h=i.getY,j=i.scaleY,O=i.setYExtent;i.showTicks;Object(a.useEffect)((function(){O((function(e){return d(e,h,s)}))}),[s,h,O]);var f=Object(a.useMemo)((function(){return Object(N.a)().domain(s.map(b)).range([0,l]).paddingInner(.2)}),[s,b,l]),x=function(e,t){return c(Object(g.a)(Object(g.a)({},n),{},Object(T.a)({},t,[].concat(Object(o.a)(n[t]),[e]))))},m=function(e,t){c(Object(g.a)(Object(g.a)({},n),{},Object(T.a)({},t,[].concat(Object(o.a)(n[t].slice(0,e)),Object(o.a)(n[t].slice(e+1))))))};return Object(u.jsx)("g",{children:Object.keys(n).map((function(e){return Object(u.jsx)(be,{x:e,scaleX:f,scaleY:j,barWidth:t,className:r,items:n[e],addItem:x,removeItem:m},e)}))})},he=function(e){var t=e.config,n=Object(a.useState)(t.data.reduce((function(e,n){return Object(g.a)(Object(g.a)({},e),{},Object(T.a)({},n[t.xKey],[]))}),{})),c=Object(s.a)(n,2),i=c[0],r=c[1],b=function(e){return Object(a.useMemo)((function(){var t=Object(l.a)(e.data,(function(t){return t[e.yKey]})),n=e.data.reduce((function(t,n){return t+n[e.yKey]}),0)/20,a=Math.round(n).toString().length,c=1/Math.pow(10,a-1),i=n*c,r=[1,2.5,5,10].reduce((function(e,t){return Math.abs(t-i)<Math.abs(e-i)?t:e})),s=r*(1/c);return console.log({rawBlocksize:n,scaleBlock:c,scaledBlockSize:i,closestBorder:r,blockSize:s}),{minY:0,maxY:t[1],blockSize:s}}),[e])}(t),d=b.maxY,h=b.minY,j=b.blockSize,f=Object(a.useMemo)((function(){return Object(y.a)().domain([d,h]).range([0,200]).nice()}),[d,h]),x=f.range()[1]-f(j);return Object(u.jsx)(K.a,{backend:z.a,children:Object(u.jsxs)("div",{className:L.a.container,children:[Object(u.jsx)(U,{}),Object(u.jsx)(O,{title:t.title,children:Object(u.jsxs)(_,{getX:function(e){return e[t.xKey]},getY:function(e){return e[t.yKey]},height:200,width:400,scaleY:f,children:[Object(u.jsx)(de,{data:t.data,barWidth:x,items:i,setItems:r}),Object(u.jsx)(Y,{})]})}),Object(u.jsxs)(O,{className:L.a.toolsContainer,children:[Object(o.a)(Array(3).keys()).reduce((function(e,n){var a=x*Math.pow(2,n-1);return{yShift:e.yShift+a+15,items:[].concat(Object(o.a)(e.items),[Object(u.jsx)($,{height:a,size:j*Math.pow(2,n-1),top:"".concat(e.yShift,"px"),scaledSize:x,padding:15,label:t.yAxisLabel})])}}),{yShift:0,items:[]}).items,Object(u.jsx)(ae,{snapToGrid:!1})]})]})})};var je=function(){var e=Object(a.useState)(0),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(u.jsxs)("div",{className:D.a.container,children:[Object(u.jsx)("div",{className:D.a.switcherContainer,children:Object(u.jsx)(m,{options:[{label:"interactive",onClick:function(){return c(0)}},{label:"plane",onClick:function(){return c(1)}}]})}),Object(u.jsx)("main",{className:D.a.main,children:0===n?Object(u.jsx)(he,{config:E}):Object(u.jsx)(O,{title:E.title,children:Object(u.jsxs)(_,{getX:function(e){return e[E.xKey]},getY:function(e){return e[E.yKey]},children:[Object(u.jsx)(M,{data:E.data}),Object(u.jsx)(Y,{})]})})})]})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(je,{})}),document.getElementById("root")),ue()}},[[68,1,2]]]);
//# sourceMappingURL=main.61c2376f.chunk.js.map